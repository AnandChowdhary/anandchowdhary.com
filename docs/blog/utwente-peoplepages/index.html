<!doctype html>
<html lang="en-us">
	<head>
		<meta charset="utf-8">
		<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
		<meta http-equiv="X-UA-Compatible" content="IE=edge">
		<title>UTwente PeoplePages Contact Book · Anand Chowdhary</title>
		<meta name="description" content="">
		<meta name="keywords" content="Anand Chowdhary, Anand, Chowdhary, Bash">
		<meta name="author" content="Anand Chowdhary">
		<link rel="canonical" href="https://anandchowdhary.com/blog/utwente-peoplepages/">
		<link rel="stylesheet" href="https://anandchowdhary.com/css/screen.css?v=ri4u283091j">
		<link rel="stylesheet" href="https://anandchowdhary.com/css/print.css?v=ri4u283091j" media="print">
		
		<meta name="generator" content="Hugo 0.31.1" />
		<link rel="author" href="https://plus.google.com/+AnandChowdhary0">
		<link rel="apple-touch-icon" sizes="180x180" href="https://anandchowdhary.com/apple-touch-icon.png">
		<link rel="icon" type="image/png" sizes="32x32" href="https://anandchowdhary.com/favicon-32x32.png">
		<link rel="icon" type="image/png" sizes="194x194" href="https://anandchowdhary.com/favicon-194x194.png">
		<link rel="icon" type="image/png" sizes="192x192" href="https://anandchowdhary.com/android-chrome-192x192.png">
		<link rel="icon" type="image/png" sizes="16x16" href="https://anandchowdhary.com/favicon-16x16.png">
		<link rel="manifest" href="https://anandchowdhary.com/site.webmanifest">
		<link rel="mask-icon" href="https://anandchowdhary.com/safari-pinned-tab.svg" color="#5bbad5">
		<meta name="msapplication-TileColor" content="#00aba9">
		<meta name="msapplication-TileImage" content="/mstile-144x144.png">
		<meta name="theme-color" content="#ffffff">
		<meta name="twitter:card" content="summary">
		<meta name="twitter:description" content="">
		<meta name="twitter:title" content="UTwente PeoplePages Contact Book · Anand Chowdhary">
		<meta name="twitter:site" content="@AnandChowdhary">
		<meta name="twitter:creator" content="@AnandChowdhary">
		<meta property="og:locale" content="en_US">
		<meta property="og:type" content="article">
		<meta property="og:title" content="UTwente PeoplePages Contact Book · Anand Chowdhary">
		<meta property="og:description" content="">
		<meta property="og:url" content="https://anandchowdhary.com/blog/utwente-peoplepages/">
		<meta property="og:site_name" content="Anand Chowdhary">
		<meta property="article:section" content="Bash">
		<meta property="article:published_time" content="2017-08-12 00:00:00 &#43;0000 UTC">
		
		
		
			<script type="application/ld+json">
			
			{ 
				"@context": "http://schema.org", 
				"@type": "WebSite", 
				"url": "https://anandchowdhary.com/blog/utwente-peoplepages/", 
				"name": "UTwente PeoplePages Contact Book",
				 "author": {
					"@type": "Person",
					"name": ""
				},
				"description": "Anand Chowdhary is a creative technologist and entrepreneur. He is the founder and CEO of Oswald Labs, an accessibility technology company.",
			}
			
			</script>
		
	</head>
	<body>
		<header id="masthead">
			<div class="container">
				<div><a class="logo" href="https://anandchowdhary.com/"><img alt="" src="https://anandchowdhary.com/favicon-32x32.png">Anand Chowdhary</a></div>
				<nav role="navigation">
					<ul>
						<li><a class="home-link" href="https://anandchowdhary.com/">Home</a></li>
						<li><a class="projects-link" href="https://anandchowdhary.com/projects/">Projects</a></li>
						<li><a class="blog-link" href="https://anandchowdhary.com/blog/">Blog</a></li>
						<li><a class="events-link" href="https://anandchowdhary.com/events/">Events</a></li>
						<li class="more">
							<button aria-label="More" class="more-button">•••</button>
							<ul class="list">
								<li><a class="open-source-link" href="https://anandchowdhary.com/open-source/">Open-source</a></li>
								<li><a class="about-link" href="https://anandchowdhary.com/about/">About</a></li>
								<li><a class="press-link" href="https://anandchowdhary.com/press/">Press</a></li>
								<li><a class="contact-link" href="https://anandchowdhary.com/contact/">Contact</a></li>
							</ul>
						</li>
					</ul>
				</nav>
			</div>
		</header>
		<div id="barba-wrapper">
			<div class="container barba-container">
	<main>
		<article itemscope itemtype="http://schema.org/Article" class="single utwente-peoplepages-contact-book blog content">
			<link itemprop="mainEntityOfPage" href="https://anandchowdhary.com/blog/utwente-peoplepages/">
			<div class="article-title">
				
				<h1 itemprop="headline">UTwente PeoplePages Contact Book</h1>
			</div>
			<div hidden style="display: none">
				<div itemprop="author">Anand Chowdhary</div>
				<div itemprop="datePublished">August 2017</div>
				<div itemprop="dateModified">August 2017</div>
				<div itemprop="publisher">Anand Chowdhary</div>
			</div>
			
				<div class="meta">Posted on <time itemprop="dateCreated">August 12, 2017</time></div>
			
			
			<div itemprop="articleBody">
				<p>As a future creative technology student at the University of Twente, I wanted to get in touch with a particular professor. Their website, <a href="https://people.utwente.nl/">PeoplePages</a>, uses a RESTful API for AJAX requests to search for university staff, so I decided to add everyone to my contacts using API scraping to save time in the future.</p>

<p></p>

<p>I did a query to find all results starting with the letter &ldquo;a&rdquo; and got a minified JSON response with all data. Fortunately, they have unrestricted access to their endpoints. This is what it looks like when cleaned:</p>

<pre><code>GET https://people.utwente.nl/search?query=a
</code></pre>
<div class="highlight"><pre class="chroma"><code class="language-json" data-lang="json"><span class="p">{</span>
	<span class="nt">&#34;data&#34;</span><span class="p">:</span> <span class="p">[</span>
		<span class="p">{</span>
			<span class="nt">&#34;type&#34;</span><span class="p">:</span> <span class="s2">&#34;person&#34;</span><span class="p">,</span>
			<span class="nt">&#34;id&#34;</span><span class="p">:</span> <span class="s2">&#34;10000000000XXXX&#34;</span><span class="p">,</span>
			<span class="nt">&#34;name&#34;</span><span class="p">:</span> <span class="s2">&#34;John Doe&#34;</span><span class="p">,</span>
			<span class="nt">&#34;jobtitle&#34;</span><span class="p">:</span> <span class="s2">&#34;Supporting Staff&#34;</span><span class="p">,</span>
			<span class="nt">&#34;avatar&#34;</span><span class="p">:</span> <span class="s2">&#34;https://people.utwente.nl/john.doe/picture.jpg&#34;</span><span class="p">,</span>
			<span class="nt">&#34;profile&#34;</span><span class="p">:</span> <span class="s2">&#34;https://people.utwente.nl/john.doe&#34;</span><span class="p">,</span>
			<span class="nt">&#34;organizations&#34;</span><span class="p">:</span> <span class="p">[</span>
				<span class="p">{</span>
					<span class="nt">&#34;code&#34;</span><span class="p">:</span> <span class="s2">&#34;S&amp;B-XXXX&#34;</span><span class="p">,</span>
					<span class="nt">&#34;department&#34;</span><span class="p">:</span> <span class="s2">&#34;S&amp;B&#34;</span><span class="p">,</span>
					<span class="nt">&#34;section&#34;</span><span class="p">:</span> <span class="s2">&#34;XXXX&#34;</span>
				<span class="p">}</span>
			<span class="p">],</span>
			<span class="nt">&#34;locations&#34;</span><span class="p">:</span> <span class="p">[</span>
				<span class="p">{</span>
					<span class="nt">&#34;description&#34;</span><span class="p">:</span> <span class="s2">&#34;Enschede 320&#34;</span><span class="p">,</span>
					<span class="nt">&#34;latitude&#34;</span><span class="p">:</span> <span class="mf">52.23979</span><span class="p">,</span>
					<span class="nt">&#34;longitude&#34;</span><span class="p">:</span> <span class="mf">6.850018</span>
				<span class="p">}</span>
			<span class="p">],</span>
			<span class="nt">&#34;phones&#34;</span><span class="p">:</span> <span class="p">[</span>
				<span class="p">{</span>
					<span class="nt">&#34;type&#34;</span><span class="p">:</span> <span class="s2">&#34;&#34;</span><span class="p">,</span>
					<span class="nt">&#34;tel&#34;</span><span class="p">:</span> <span class="s2">&#34;+3153489XXXX&#34;</span><span class="p">,</span>
					<span class="nt">&#34;prefix&#34;</span><span class="p">:</span> <span class="s2">&#34;+3153489&#34;</span><span class="p">,</span>
					<span class="nt">&#34;ext&#34;</span><span class="p">:</span> <span class="s2">&#34;XXXX&#34;</span>
				<span class="p">}</span>
			<span class="p">],</span>
			<span class="nt">&#34;email&#34;</span><span class="p">:</span> <span class="s2">&#34;john.doe@utwente.nl&#34;</span>
		<span class="p">}</span>
	<span class="p">]</span>
<span class="p">}</span></code></pre></div>
<p>and so on. Since empty searches, space searches, and others weren&rsquo;t working, I decided to query each letter of the alphabet and save the JSON result to play with it:</p>
<div class="highlight"><pre class="chroma"><code class="language-bash" data-lang="bash">wget https://people.utwente.nl/search?query<span class="o">={</span>a..z<span class="o">}</span></code></pre></div>
<p>I soon realized that this wouldn&rsquo;t work because the API restricts the number of results to 50, but this would:</p>
<div class="highlight"><pre class="chroma"><code class="language-bash" data-lang="bash">wget https://people.utwente.nl/search?query<span class="o">={</span>a..z<span class="o">}{</span>a..z<span class="o">}</span></code></pre></div>
<p>This goes through every combination in the alphabet: aa, ab, ac &hellip; zx, zy, zz, and downloads the JSON file. This was enough, but in many combinations like xx, xz, etc., there were no results, so the empty JSON file was exactly 43 bytes with just the JSON structure. I then got rid of those files:</p>
<div class="highlight"><pre class="chroma"><code class="language-bash" data-lang="bash">find . -name <span class="s2">&#34;*&#34;</span> -size 43c -delete</code></pre></div>
<p>This Bash command finds all files that are of 43 bytes in size and deletes them. Note that if I just filter the size in bytes and query something like <code>-size 43 -delete</code>, it interprets it as 43*512 bytes, so the <a href="https://superuser.com/a/644274">POSIX requirement</a> states &ldquo;c&rdquo; for bytes.</p>

<p>Finally I concatenated all the JSON files to one giant 4.9 MB file.</p>
<div class="highlight"><pre class="chroma"><code class="language-bash" data-lang="bash">cat * &gt; contacts.json</code></pre></div>
<p>After cleaning the file, removing business contacts, and generally playing with the JSON content, I have a directory of 7527 people including duplicates. Sublime Text can handle this for me, with the simple command: Edit -&gt; Permute Lines -&gt; Unique. I now have 3740 people.</p>

<p>Then, I clean up by replacing double space with single, change the &ldquo;Surname, Firstname&rdquo; format to &ldquo;Firstname Surname&rdquo;, and saved the contacts in a CSV file.</p>

<p>I now have the phone numbers, email addresses, and office addresses of all my professors, the Dean, and other important contacts for the university in my phone&rsquo;s contact book. Simple enough.</p>

<h2 id="security">Security</h2>

<p>The simple way to prevent this is to have secured API endpoints. There are many ways to do that — token-based authentication for each user with rate limiting, or even CORS prevention.</p>

<p><img src="https://res.cloudinary.com/anand-chowdhary/image/upload/v1532798814/secure-endpoints_ddwwmr.png" alt="Screenshot of Google Search results for &quot;secure api endpoints&quot;" /></p>

<p><strong>Update May 2018:</strong> Since then, the university has updated their endpoints. You cannot access them by barebones HTTP now. The new endpoints also seem to have some form of CORS protection.</p>
			</div>
			<footer class="meta"><p>
				<span>Posted in <a href="https://anandchowdhary.com/blog/">Blog</a></span>
				<span>
					
						&middot; <a itemprop="itemSection" href="https://anandchowdhary.com/tags/bash/">Bash</a>
					
				</span>
			</p></footer>
		</article>
	</main>
	

			</div>
		</div>
		<footer id="colophon">
			<div class="container">
				<p>&copy; 2008&ndash;2018 Anand Chowdhary</p>
				<a href="https://madewithlove.org.in" target="_blank" rel="noopener noreferrer">Made with ❤️ in 🇮🇳 and 🇳🇱</a>
			</div>
		</footer>
		<script src="https://anandchowdhary.com/js/scripts.js?v=rj2p4o139ewakpeiq"></script>
		<script src="https://agastya-loader.oswaldlabs.com/anand.js" async defer></script>
		<script async src="https://www.googletagmanager.com/gtag/js?id=UA-39298323-1"></script>
		<script>
			window.dataLayer = window.dataLayer || [];
			function gtag(){dataLayer.push(arguments);}
			gtag("js", new Date());
			gtag("config", "UA-39298323-1");
		</script>
		<script type="application/ld+json">{"@context":"https://schema.org","@type":"person","name":"Anand Chowdhary","url":"https://anandchowdhary.com","birthDate":"1997-12-29","gender":"Male","nationality":"India","homeLocation":"Enschede, the Netherlands","jobTitle":"Chief Executive Officer","worksFor":{"@type":"Organization","name":"Oswald Labs","alternateName":"Oswald Foundation","url":"https://oswaldlabs.com","logo":"https://static.oswaldlabs.com/oswald-labs-logo.svg","email":"yourfriends@oswaldlabs.com","sameAs":["https://www.facebook.com/OswaldLabs","https://www.twitter.com/OswaldLabs","https://en.wikipedia.org/wiki/Oswald_Labs","https://www.wikidata.org/wiki/Q27593967"]},"sameAs":["https://www.facebook.com/AnandChowdhary","https://www.twitter.com/AnandChowdhary","https://www.linkedin.com/in/AnandChowdhary/","https://plus.google.com/+AnandChowdhary0","https://www.instagram.com/anandchowdhary/","https://www.wikidata.org/wiki/Q33134612"]}</script>
	</body>
</html>
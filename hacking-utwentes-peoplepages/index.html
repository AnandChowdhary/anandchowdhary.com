<!DOCTYPE html>
<html lang="en" itemscope itemtype="http://schema.org/Article" prefix="og: http://ogp.me/ns#">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<link rel="profile" href="https://gmpg.org/xfn/11">
<link rel="stylesheet" href="/wp-content/themes/access/style.css?ver=4.8" media="none" onload="if (media != 'all') media = 'all'">
<noscript><link rel="stylesheet" href="/wp-content/themes/access/style.css?ver=4.8"></noscript>
<title>Hacking UTwente&#8217;s PeoplePages &#8211; Anand Chowdhary</title>

<link rel="author" href="https://plus.google.com/+AnandChowdhary0" />
<meta name="description" content="As a future CreaTe student at the University of Twente, I wanted to get in touch with a particular professor. Their website, PeoplePages, uses a RESTful API for" />
<meta name="keywords" content="code,hacking,json,blog,coffee time" />
<link rel="canonical" href="/hacking-utwentes-peoplepages/" />
<meta property="og:title" content="Hacking UTwente&#039;s PeoplePages |" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://anandchowdhary.com/hacking-utwentes-peoplepages/" />
<meta property="og:site_name" content="Anand Chowdhary" />
<meta property="fb:admins" content="100000546315577" />
<meta property="og:description" content="As a future CreaTe student at the University of Twente, I wanted to get in touch with a particular professor. Their website, PeoplePages, uses a RESTful API for AJAX requests to search for university staff, so I decided to add everyone to my contacts. (Also makes sending LinkedIn requests to everyone much easier.) See how I did it and how they could improve their security, so others can&#039;t." />
<meta property="article:tag" content="code" />
<meta property="article:tag" content="hacking" />
<meta property="article:tag" content="json" />
<meta property="article:tag" content="blog" />
<meta property="article:tag" content="coffee time" />
<meta property="article:published_time" content="2017-08-12T18:33:54Z" />
<meta property="article:modified_time" content="2017-10-17T14:20:05Z" />
<meta name="twitter:card" content="summary" />
<meta name="twitter:site" content="@AnandChowdhary" />
<meta name="twitter:domain" content="anandchowdhary.com" />
<meta name="twitter:title" content="Hacking UTwente&#039;s PeoplePages |" />
<meta name="twitter:description" content="As a future CreaTe student at the University of Twente, I wanted to get in touch with a particular professor. Their website, PeoplePages, uses a RESTful API for AJAX requests to search for university staff, so I decided to add everyone to my contacts. (Also makes sending LinkedIn requests to everyone much easier.) See how I did it and how they could improve their security, so others can&#039;t." />
<script type="text/javascript">
				window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)};ga.l=+new Date;
				ga('create', 'UA-39298323-1', 'auto');
				// Plugins
				
				ga('send', 'pageview');
			</script>
<script async src="https://www.google-analytics.com/analytics.js"></script>

<link rel='dns-prefetch' href='//s.w.org' />
<link rel="alternate" type="application/rss+xml" title="Anand Chowdhary &raquo; Feed" href="/feed/" />
<link rel="alternate" type="application/rss+xml" title="Anand Chowdhary &raquo; Comments Feed" href="/comments/feed/" />
<link rel="alternate" type="application/rss+xml" title="Anand Chowdhary &raquo; Hacking UTwente&#8217;s PeoplePages Comments Feed" href="/hacking-utwentes-peoplepages/feed/" />
<script>
      if (document.location.protocol != "https:") {
          // document.location = document.URL.replace(/^http:/i, "https:");
      }
      </script>
<link rel='https://api.w.org/' href='/wp-json/' />
<link rel="EditURI" type="application/rsd+xml" title="RSD" href="/xmlrpc.php?rsd" />
<link rel="wlwmanifest" type="application/wlwmanifest+xml" href="/wp-includes/wlwmanifest.xml" />
<link rel='prev' title='University of Twente' href='/twente/' />
<link rel='next' title='FaceMatch' href='/facematch/' />
<meta name="generator" content="WordPress 4.9.2" />
<link rel='shortlink' href='/?p=289' />
<link rel="alternate" type="application/json+oembed" href="/wp-json/oembed/1.0/embed?url=https%3A%2F%2F%2Fhacking-utwentes-peoplepages%2F" />
<link rel="alternate" type="text/xml+oembed" href="/wp-json/oembed/1.0/embed?url=https%3A%2F%2F%2Fhacking-utwentes-peoplepages%2F&#038;format=xml" />
<link rel="apple-touch-icon" sizes="180x180" href="/wp-content/uploads/fbrfg/apple-touch-icon.png">
<link rel="icon" type="image/png" sizes="32x32" href="/wp-content/uploads/fbrfg/favicon-32x32.png">
<link rel="icon" type="image/png" sizes="194x194" href="/wp-content/uploads/fbrfg/favicon-194x194.png">
<link rel="icon" type="image/png" sizes="192x192" href="/wp-content/uploads/fbrfg/android-chrome-192x192.png">
<link rel="icon" type="image/png" sizes="16x16" href="/wp-content/uploads/fbrfg/favicon-16x16.png">
<link rel="manifest" href="/wp-content/uploads/fbrfg/manifest.json">
<link rel="mask-icon" href="/wp-content/uploads/fbrfg/safari-pinned-tab.svg" color="#1abc9c">
<link rel="shortcut icon" href="/wp-content/uploads/fbrfg/favicon.ico">
<meta name="msapplication-TileColor" content="#1abc9c">
<meta name="msapplication-TileImage" content="/wp-content/uploads/fbrfg/mstile-144x144.png">
<meta name="msapplication-config" content="/wp-content/uploads/fbrfg/browserconfig.xml">
<meta name="theme-color" content="#ffffff"><link rel="pingback" href="/xmlrpc.php"> <style type="text/css">.recentcomments a{display:inline !important;padding:0 !important;margin:0 !important;}</style>
<link rel="amphtml" href="/hacking-utwentes-peoplepages/amp/" /></head>
<body data-rsssl=1 class="post-template-default single single-post postid-289 single-format-standard">
<div id="page" class="site">
<a class="skip-link screen-reader-text" href="#content">Skip to content</a>
<header id="masthead" class="site-header" role="banner">
<a class="logo" href="/" rel="home">Anand Chowdhary</a>
<nav id="site-navigation" class="main-navigation" role="navigation">
<div class="menu-main-menu-container"><ul id="primary-menu" class="menu"><li id="menu-item-311" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-311"><a href="/category/projects/" itemprop="url">Projects</a></li>
<li id="menu-item-310" class="menu-item menu-item-type-taxonomy menu-item-object-category current-post-ancestor current-menu-parent current-post-parent menu-item-310"><a href="/category/blog/" itemprop="url">Blog</a></li>
<li id="menu-item-307" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-307"><a href="/about/" itemprop="url">About</a></li>
<li id="menu-item-308" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-308"><a href="/contact/" itemprop="url">Contact</a></li>
<li id="menu-item-309" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-309"><a href="/press/" itemprop="url">Press</a></li>
</ul></div> </nav>
<div class="social-links">
<a target="_blank" href="https://twitter.com/AnandChowdhary">
<svg version="1.1" id="Layer_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" viewbox="0 -1 16 16" enable-background="new 0 -1 16 16" xml:space="preserve"> <title>twitter</title> <desc>Created with Sketch.</desc> <g id="Page-1"> <g id="Artboard-Copy-13" transform="translate(-954.000000, -32.000000)"> <path id="twitter" fill="#FFFFFF" d="M970,33.9c-0.6,0.3-1.2,0.4-1.9,0.5c0.7-0.4,1.2-1.1,1.4-1.8c-0.6,0.4-1.3,0.6-2.1,0.8 c-0.6-0.6-1.5-1-2.4-1c-1.8,0-3.3,1.5-3.3,3.3c0,0.3,0,0.5,0.1,0.8c-2.7-0.1-5.1-1.4-6.8-3.4c-0.3,0.5-0.4,1-0.4,1.6 c0,1.1,0.6,2.1,1.5,2.7c-0.5,0-1-0.2-1.5-0.4v0c0,1.6,1.1,2.9,2.6,3.2c-0.3,0.1-0.6,0.1-0.9,0.1c-0.2,0-0.4,0-0.6-0.1 c0.4,1.3,1.6,2.3,3.1,2.3c-1.1,0.9-2.5,1.6-4.1,1.6c-0.3,0-0.5,0-0.8-0.1c1.4,0.9,3.2,1.3,5,1.3c6,0,9.3-5,9.3-9.3v-0.4 C969,35.1,969.6,34.5,970,33.9z" /> </g> </g> </svg>
</a>
<a target="_blank" href="/cdn-cgi/l/email-protection#cda5a8a1a1a28daca3aca3a9aea5a2baa9a5acbfb4e3aea2a0" style="margin-right: 13px">
<svg version="1.1" id="Layer_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" viewbox="0.5 -2 16 16" enable-background="new 0.5 -2 16 16" xml:space="preserve"> <title>mail</title> <desc>Created with Sketch.</desc> <g id="Page-1"> <g id="Artboard-Copy-13" transform="translate(-887.000000, -33.000000)"> <path id="mail" fill="#FFFFFF" d="M887.5,35.8l8,6l8-6V44c0,0.6-0.4,1-1,1h-14c-0.6,0-1-0.4-1-1V35.8z M903.5,34l-8,6l-8-6 c0-0.6,0.4-1,1-1h14C903.1,33,903.5,33.4,903.5,34z" /> </g> </g> </svg>
</a>
<a target="_blank" href="https://facebook.com/AnandChowdhary">
<svg viewbox="383 210 267 267" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">  <desc>Created with Sketch.</desc> <defs> <polygon id="path-1" points="133.44655 267 266.893 267 266.893 0.105 133.44655 0.105 0.0001 0.105 0.0001 267 133.44655 267"></polygon> </defs> <g id="Group-3" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd" transform="translate(383.000000, 210.000000)"> <mask id="mask-2" fill="white"> <use xlink:href="#path-1"></use> </mask> <g id="Clip-2"></g> <path d="M252.1631,267 C260.2971,267 266.8931,260.404 266.8931,252.27 L266.8931,14.836 C266.8931,6.699 260.2971,0.105 252.1631,0.105 L14.7301,0.105 C6.5931,0.105 0.0001,6.699 0.0001,14.836 L0.0001,252.27 C0.0001,260.404 6.5931,267 14.7301,267 L252.1631,267 Z M184.1514,267 L184.1514,163.645 L218.8444,163.645 L224.0384,123.365 L184.1514,123.365 L184.1514,97.648 C184.1514,85.986 187.3894,78.039 204.1134,78.039 L225.4434,78.029 L225.4434,42.003 C221.7534,41.513 209.0924,40.416 194.3624,40.416 C163.6094,40.416 142.5564,59.187 142.5564,93.66 L142.5564,123.365 L107.7754,123.365 L107.7754,163.645 L142.5564,163.645 L142.5564,267 L184.1514,267 Z" id="Combined-Shape" fill="#3C5999" mask="url(#mask-2)"></path> </g> </svg>
</a>
</div>
</header>
<div id="content" class="site-content">
<div id="primary" class="content-area">
<main id="main" class="site-main" role="main">
<div class="category-info">
<strong>Blog</strong><br><span>Words about design, the industry, and everything in between.</span>
</div>
<div style="margin-bottom: 30px">
</div>
<article id="post-289" class="post-289 post type-post status-publish format-standard hentry category-blog category-coffee-time tag-code tag-hacking tag-json">
<div>
<header class="entry-header">
<h1 class="entry-title">Hacking UTwente&#8217;s PeoplePages</h1> <p>
<span class="posted-on">Posted on <a href="/hacking-utwentes-peoplepages/" rel="bookmark"><time class="entry-date published" datetime="2017-08-12T18:33:54+00:00">August 12, 2017</time><time class="updated" datetime="2017-10-17T14:20:05+00:00">October 17, 2017</time></a></span><span class="byline"> by <span class="author vcard"><a class="url fn n" href="/author/admin/">admin</a></span></span> </p> </header>
<div class="entry-content">
<p>As a future CreaTe student at the University of Twente, I wanted to get in touch with a particular professor. Their website, <a href="https://people.utwente.nl/">PeoplePages</a>, uses a RESTful API for AJAX requests to search for university staff, so I decided to add everyone to my contacts. (Also makes sending LinkedIn requests to everyone much easier.)</p>
<p>I did a query to find all results starting with the letter &#8220;a&#8221; and got a minified JSON response with all data. Fortunately, they have unrestricted access to their endpoints. This is what it looks like when cleaned:</p>
<pre>GET https://people.utwente.nl/search?query=a</pre>
<pre>{
	"data":[
		{
			"type":"person",
			"id":"10000000000XXXX",
			"name":"John Doe",
			"jobtitle":"Supporting Staff",
			"avatar":"https://people.utwente.nl/john.doe/picture.jpg",
			"profile":"https://people.utwente.nl/john.doe",
			"organizations":[
				{
					"code":"S&amp;B-XXXX",
					"department":"S&amp;B",
					"section":"XXXX"
				}
			],
			"locations":[
				{
					"description":"Enschede 320",
					"latitude":52.23979,
					"longitude":6.850018
				}
			],
			"phones":[
				{
					"type":"",
					"tel":"+3153489XXXX",
					"prefix":"+3153489",
					"ext":"XXXX"
				}
			],
			"email":"<a href="/cdn-cgi/l/email-protection" class="__cf_email__" data-cfemail="97fdf8fff9b9f3f8f2d7e2e3e0f2f9e3f2b9f9fb">[email&#160;protected]</a>"
		}
	]
}</pre>
<p>and so on. Since empty searches, space searches, and others weren&#8217;t working, I decided to query each letter of the alphabet and save the JSON result to play with it:</p>
<pre>wget https://people.utwente.nl/search?query={a..z}</pre>
<p>I soon realized that this wouldn&#8217;t work because the API restricts the number of results to 50, but this would:</p>
<pre>wget https://people.utwente.nl/search?query={a..z}{a..z}</pre>
<p>This goes through every combination in the alphabet: aa, ab, ac . . . zx, zy, zz, and downloads the JSON file. This was enough, but in many combinations, there were no results, so the empty JSON file was exactly 43 bytes. I then got rid of those files:</p>
<pre>find . -name "*" -size 43c -delete</pre>
<p>This Bash command finds all files that are of 43 bytes in size and deletes them. Note that if I just filter the size in bytes and query something like <code>-size 43 -delete</code>, it <a href="https://superuser.com/a/644274">interprets it as</a> 43*512 bytes, so the POSIX requirement states &#8220;c&#8221; for bytes.</p>
<p>Finally I concatenated all the JSON files to one giant 4.9 MB file.</p>
<pre class="p1"><span class="s1">cat * &gt; contacts.json</span></pre>
<p>After cleaning the file, removing business contacts, and generally playing with the JSON content, I have a directory of 7527 people including duplicates. Sublime Text can handle this for me, with the simple command: Edit -&gt; Permute Lines -&gt; Unique. I now have 3740 people.</p>
<p>Then, I clean up by replacing double space with single, change the &#8220;Surname, Firstname&#8221; format to &#8220;Firstname Surname&#8221;, and saved the contacts in a CSV file.</p>
<p>Simple enough, but I now have the phone numbers, email addresses, and office addresses of all my professors, the Dean, and other important contacts for the university. Simple enough.</p>
<h3>Security</h3>
<p>The simple way to prevent this is to have secured API endpoints. There are many ways to do that &#8212; token-based authentication for each user with rate limiting, or even CORS prevention.</p>
<p><img class="alignnone size-full wp-image-304" src="https://www.accessibility.technology/websites/anand/anandchowdhary.com/wp-content/uploads/2017/08/Screen-Shot-2017-08-12-at-6.32.24-PM.png" alt="" width="1273" height="833" srcset="/wp-content/uploads/2017/08/Screen-Shot-2017-08-12-at-6.32.24-PM.png 1273w, /wp-content/uploads/2017/08/Screen-Shot-2017-08-12-at-6.32.24-PM-300x196.png 300w, /wp-content/uploads/2017/08/Screen-Shot-2017-08-12-at-6.32.24-PM-768x503.png 768w, /wp-content/uploads/2017/08/Screen-Shot-2017-08-12-at-6.32.24-PM-1024x670.png 1024w" sizes="(max-width: 1273px) 100vw, 1273px" /></p>
</div>
</article>
<nav class="navigation post-navigation" role="navigation">
<h2 class="screen-reader-text">Post navigation</h2>
<div class="nav-links"><div class="nav-previous"><a href="/twente/" rel="prev">University of Twente</a></div><div class="nav-next"><a href="/facematch/" rel="next">FaceMatch</a></div></div>
</nav>
</main>
</div>
</div>
<footer id="colophon" class="site-footer" role="contentinfo"> <div class="footer-hoder">
<small>
<div>&copy; 2010&ndash;2018 Anand Chowdhary</div>
<div><a href="https://madewithlove.org.in/" target="_blank">Made with <span style="color: #e74c3c">&hearts;</span> in India</a></div>
</small>
</footer>
</div></div>
<script data-cfasync="false" src="/cdn-cgi/scripts/d07b1474/cloudflare-static/email-decode.min.js"></script><script type="application/ld+json">{"@context":"https://schema.org","@type":"person","name":"Anand Chowdhary","url":"https://anandchowdhary.com","birthDate":"1997-12-29","gender":"Male","nationality":"India","jobTitle":"Chief Executive Officer","worksFor":{"@type":"Organization","name":"Oswald Foundation","url":"https://oswald.foundation","logo":"https://cdn.oswald.foundation/1fef2-logo.png","sameAs":["https://www.facebook.com/OswaldFoundation","https://www.twitter.com/OswaldLabs","https://plus.google.com/+OswaldFoundation","https://en.wikipedia.org/wiki/Oswald_Foundation","https://www.wikidata.org/wiki/Q27593967"] },"sameAs":["https://www.facebook.com/AnandChowdhary","https://www.twitter.com/AnandChowdhary","https://www.linkedin.com/in/anandchowdhary/","https://plus.google.com/+AnandChowdhary0","https://www.instagram.com/anandchowdhary/","https://www.wikidata.org/wiki/Q33134612"]}</script><script>document.addEventListener("DOMContentLoaded",function(){for(var e=document.querySelectorAll(".entry-content > *"),t=0;t<e.length;t++)if(e[t].childElementCount>0&&e[t].querySelector("img")){e[t].style.opacity="0.1";var n=document.createElement("div");n.classList.add("big-hero-seven"),n.style.marginBottom="20px",n.innerHTML=e[t].innerHTML,e[t].parentNode.insertBefore(n,e[t]),e[t].parentNode.removeChild(e[t])}});(function(){var container,button,menu,links,i,len;container=document.getElementById('site-navigation');if(!container){return;}
button=container.getElementsByTagName('button')[0];if('undefined'===typeof button){return;}
menu=container.getElementsByTagName('ul')[0];if('undefined'===typeof menu){button.style.display='none';return;}
menu.setAttribute('aria-expanded','false');if(-1===menu.className.indexOf('nav-menu')){menu.className+=' nav-menu';}
button.onclick=function(){if(-1!==container.className.indexOf('toggled')){container.className=container.className.replace(' toggled','');button.setAttribute('aria-expanded','false');menu.setAttribute('aria-expanded','false');}else{container.className+=' toggled';button.setAttribute('aria-expanded','true');menu.setAttribute('aria-expanded','true');}};links=menu.getElementsByTagName('a');for(i=0,len=links.length;i<len;i++){links[i].addEventListener('focus',toggleFocus,true);links[i].addEventListener('blur',toggleFocus,true);}
function toggleFocus(){var self=this;while(-1===self.className.indexOf('nav-menu')){if('li'===self.tagName.toLowerCase()){if(-1!==self.className.indexOf('focus')){self.className=self.className.replace(' focus','');}else{self.className+=' focus';}}
self=self.parentElement;}}
(function(container){var touchStartFn,i,parentLink=container.querySelectorAll('.menu-item-has-children > a, .page_item_has_children > a');if('ontouchstart'in window){touchStartFn=function(e){var menuItem=this.parentNode,i;if(!menuItem.classList.contains('focus')){e.preventDefault();for(i=0;i<menuItem.parentNode.children.length;++i){if(menuItem===menuItem.parentNode.children[i]){continue;}
menuItem.parentNode.children[i].classList.remove('focus');}
menuItem.classList.add('focus');}else{menuItem.classList.remove('focus');}};for(i=0;i<parentLink.length;++i){parentLink[i].addEventListener('touchstart',touchStartFn,false);}}}(container));})();(function(){var isIe=/(trident|msie)/i.test(navigator.userAgent);if(isIe&&document.getElementById&&window.addEventListener){window.addEventListener('hashchange',function(){var id=location.hash.substring(1),element;if(!(/^[A-z0-9_-]+$/.test(id))){return;}
element=document.getElementById(id);if(element){if(!(/^(?:a|select|input|button|textarea)$/i.test(element.tagName))){element.tabIndex=-1;}
element.focus();}},false);}})();!function(a,b){"use strict";function c(){if(!e){e=!0;var a,c,d,f,g=-1!==navigator.appVersion.indexOf("MSIE 10"),h=!!navigator.userAgent.match(/Trident.*rv:11\./),i=b.querySelectorAll("iframe.wp-embedded-content");for(c=0;c<i.length;c++){if(d=i[c],!d.getAttribute("data-secret"))f=Math.random().toString(36).substr(2,10),d.src+="#?secret="+f,d.setAttribute("data-secret",f);if(g||h)a=d.cloneNode(!0),a.removeAttribute("security"),d.parentNode.replaceChild(a,d)}}}var d=!1,e=!1;if(b.querySelector)if(a.addEventListener)d=!0;if(a.wp=a.wp||{},!a.wp.receiveEmbedMessage)if(a.wp.receiveEmbedMessage=function(c){var d=c.data;if(d.secret||d.message||d.value)if(!/[^a-zA-Z0-9]/.test(d.secret)){var e,f,g,h,i,j=b.querySelectorAll('iframe[data-secret="'+d.secret+'"]'),k=b.querySelectorAll('blockquote[data-secret="'+d.secret+'"]');for(e=0;e<k.length;e++)k[e].style.display="none";for(e=0;e<j.length;e++)if(f=j[e],c.source===f.contentWindow){if(f.removeAttribute("style"),"height"===d.message){if(g=parseInt(d.value,10),g>1e3)g=1e3;else if(~~g<200)g=200;f.height=g}if("link"===d.message)if(h=b.createElement("a"),i=b.createElement("a"),h.href=f.getAttribute("src"),i.href=d.value,i.host===h.host)if(b.activeElement===f)a.top.location.href=d.value}else;}},d)a.addEventListener("message",a.wp.receiveEmbedMessage,!1),b.addEventListener("DOMContentLoaded",c,!1),a.addEventListener("load",c,!1)}(window,document);</script>
</body>
</html>
